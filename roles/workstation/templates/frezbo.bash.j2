# shellcheck shell=bash

# use startship prompt

function set_win_title() {
    echo -ne "\033]0; ${USER}@${HOSTNAME}:${PWD//${HOME}/\~} \007"
}

starship_precmd_user_func="set_win_title"
eval "$(starship init bash)"

# local path
PATH=~/.local/bin/:${PATH}

# assh
alias ssh="assh wrapper ssh --"

# kubie aliases
alias kx="kubie ctx"
alias kn="kubie ns"

# fzf
# shellcheck source=/home/frezbo/.fzf.bash
[ -f ~/.fzf.bash ] && source ~/.fzf.bash

# GO PATH
PATH=~/.local/bin/go/bin:${PATH}
GOPATH=~/work/golang

# rust PATH
PATH=~/.cargo/bin:${PATH}

# Pulumi PATH
PATH=~/.local/bin/pulumi:${PATH}

# Docker PATH
PATH=~/.local/bin/docker:${PATH}

# add Krew
PATH=~/.krew/bin:${PATH}

# direnv
eval "$(direnv hook bash)"

# function to merge kubeconfig
# ### usage
# kmerge  <path to kubeconfig> <context name>
function kmerge() {
    k8s-ctx-import -name "${2}" \
        -set-current-context=false \
        < "${1}"
}

export GOPATH
export PATH

alias pbcopy='xclip -selection clipboard'
alias pbpaste='xclip -selection clipboard -o'
alias p='pushd .'
alias g='popd'
alias d='dirs -v'
alias code='codium'
alias gc='git clone'
alias gs='git status'
alias gd='git diff'
alias gcm='git commit'
alias aws='aws-cli'
alias az='azure-cli'

# kubectl bash completion
source <(kubectl completion bash)

# helm bash completion
source <(helm completion bash)

# docker bash completion
source ~/.docker-completion.sh

# GitHub cli bash completion
eval "$(gh completion -s bash)"

# setup environemnt variables
# enable Helm v3 OCI registry support
export HELM_EXPERIMENTAL_OCI=1
